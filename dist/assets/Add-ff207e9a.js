import{u as x}from"./getDataUsuarios-ec8514d1.js";import{i as q,s as b,r as U,o as C,c as m,d as g,f as i,w as p,e as l,m as _,l as w}from"./index-cdc5c833.js";import{C as M,c as k,b as $,a as v}from"./alerts-7dbfee83.js";import{M as V}from"./ModernButton-8b041619.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{M as u}from"./ModernInput-32844397.js";import{M as S}from"./ModernSelect-fa688c41.js";import{L as A}from"./LoaderBtn-cd6be9a3.js";/* empty css                                                                     */const F={class:"form-container"},N={class:"form-row"},R={class:"form-row"},j={class:"footer-content"},D={class:"footer-actions"},G={class:"action-buttons"},P={key:1,class:"material-icons"},T={__name:"Add",setup(O){const{addUser:y}=x(),E=q(),r=b({usuario:"",contrasena:"",nombre:"",primer_apellido:"",segundo_apellido:"",correo:"",tipo_usuario:""}),n=U(!1),a=b({usuario:"",contrasena:"",nombre:"",primer_apellido:"",segundo_apellido:"",correo:"",tipo_usuario:""});C(()=>{});const s=(t,e)=>{switch(t){case"nombre":return e.trim()?e.length<2?(a.nombre="El nombre debe tener al menos 2 caracteres",!1):(a.nombre="",!0):(a.nombre="El nombre es requerido",!1);case"primer_apellido":return e.trim()?e.length<2?(a.primer_apellido="El primer apellido debe tener al menos 2 caracteres",!1):(a.primer_apellido="",!0):(a.primer_apellido="El primer apellido es requerido",!1);case"segundo_apellido":return e.trim()?e.length<2?(a.segundo_apellido="El segundo apellido debe tener al menos 2 caracteres",!1):(a.segundo_apellido="",!0):(a.segundo_apellido="El segundo apellido es requerido",!1);case"correo":const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.trim()?o.test(e)?(a.correo="",!0):(a.correo="Ingrese un correo válido",!1):(a.correo="El correo es requerido",!1);case"contrasena":return e?e.length<6?(a.contrasena="La contraseña debe tener al menos 6 caracteres",!1):(a.contrasena="",!0):(a.contrasena="La contraseña es requerida",!1);case"tipo_usuario":return e?(a.tipo_usuario="",!0):(a.tipo_usuario="Debe seleccionar un tipo de usuario",!1);default:return!0}},I=()=>[s("nombre",r.nombre),s("primer_apellido",r.primer_apellido),s("segundo_apellido",r.segundo_apellido),s("correo",r.correo),s("contrasena",r.contrasena),s("tipo_usuario",r.tipo_usuario)].every(Boolean),B=async()=>{if(!I()){k("Por favor, corrija los errores en el formulario");return}n.value=!0;try{r.usuario=r.correo;const t=await y(r),{data:e,status:o}=t;o===200||o===201?(await $("Registro exitoso","Redirigiendo a pantalla <strong>Usuarios</strong>",3),c(),f()):v("Error durante el registro")}catch(t){console.error("Error:",t),v("Error durante el registro")}finally{n.value=!1}},c=()=>{Object.keys(r).forEach(t=>{r[t]=""})},f=()=>{c(),E.push("/users")},d=(t,e)=>{r[t]=e,a[t]&&s(t,e)};return(t,e)=>(m(),g("div",null,[i(M,{title:"Agregar Usuario",subtitle:"Formulario para agregar nuevo usuario",icon:"person_add"},{body:p(()=>[l("div",F,[l("div",N,[i(u,{modelValue:r.nombre,"onUpdate:modelValue":e[0]||(e[0]=o=>r.nombre=o),type:"text",label:"Nombre Completo",icon:"person",onBlur:e[1]||(e[1]=o=>s("nombre",r.nombre)),onInput:e[2]||(e[2]=o=>d("nombre",o.target.value)),placeholder:"Ingrese su nombre",required:!0,error:a.nombre,disabled:n.value},null,8,["modelValue","error","disabled"]),i(u,{modelValue:r.primer_apellido,"onUpdate:modelValue":e[3]||(e[3]=o=>r.primer_apellido=o),type:"text",label:"Primer apellido",icon:"person",onBlur:e[4]||(e[4]=o=>s("primer_apellido",r.primer_apellido)),onInput:e[5]||(e[5]=o=>d("primer_apellido",o.target.value)),placeholder:"Ingrese su primer_apellido",required:!0,error:a.primer_apellido,disabled:n.value},null,8,["modelValue","error","disabled"])]),l("div",R,[i(u,{modelValue:r.segundo_apellido,"onUpdate:modelValue":e[6]||(e[6]=o=>r.segundo_apellido=o),type:"text",label:"Segundo apellido",icon:"person",onBlur:e[7]||(e[7]=o=>s("segundo_apellido",r.segundo_apellido)),onInput:e[8]||(e[8]=o=>d("segundo_apellido",o.target.value)),placeholder:"Ingrese su segundo_apellido",required:!0,error:a.segundo_apellido,disabled:n.value},null,8,["modelValue","error","disabled"])]),i(u,{modelValue:r.correo,"onUpdate:modelValue":e[9]||(e[9]=o=>r.correo=o),type:"email",label:"Correo Electrónico",onInput:e[10]||(e[10]=o=>d("correo",o.target.value)),onBlur:e[11]||(e[11]=o=>s("correo",r.correo)),icon:"email",placeholder:"ejemplo@correo.com",required:!0,error:a.correo,disabled:n.value},null,8,["modelValue","error","disabled"]),i(u,{modelValue:r.contrasena,"onUpdate:modelValue":e[12]||(e[12]=o=>r.contrasena=o),type:"password",label:"Contraseña",icon:"lock",placeholder:"Mínimo 6 caracteres",required:!0,onInput:e[13]||(e[13]=o=>d("contrasena",o.target.value)),onBlur:e[14]||(e[14]=o=>s("contrasena",r.contrasena)),error:a.contrasena,disabled:n.value},null,8,["modelValue","error","disabled"]),i(S,{modelValue:r.tipo_usuario,"onUpdate:modelValue":e[15]||(e[15]=o=>r.tipo_usuario=o),label:"tipo de usuario de usuario",icon:"badge",options:[{nombre:"Administrador",codigo:"1"},{nombre:"Monitoreo",codigo:"2"}],"option-label":"nombre","option-value":"codigo",placeholder:"Seleccione un tipo de usuario",onInput:e[16]||(e[16]=o=>d("tipo_usuario",o.target.value)),onBlur:e[17]||(e[17]=o=>s("tipo_usuario",r.tipo_usuario)),error:a.tipo_usuario,disabled:n.value},null,8,["modelValue","error","disabled"]),e[18]||(e[18]=l("div",{class:"form-info mt-3"},[l("div",{class:"info-item"},[l("span",{class:"material-icons"},"info"),l("span",null,"Los campos marcados con * son obligatorios")]),l("div",{class:"info-item"},[l("span",{class:"material-icons"},"security"),l("span",null,"La contraseña debe tener al menos 6 caracteres")])],-1))])]),footer:p(()=>[l("div",j,[e[21]||(e[21]=l("div",{class:"footer-info"},[l("span",{class:"material-icons"},"info"),l("span",null,"Complete todos los campos requeridos")],-1)),l("div",D,[l("div",G,[i(V,{color:"lile",function:f,tooltip:"Cancelar y volver",disabled:n.value},{default:p(()=>e[19]||(e[19]=[l("span",{class:"material-icons"},"arrow_back",-1),_(" Cancelar ",-1)])),_:1,__:[19]},8,["disabled"]),i(V,{color:"green",function:B,disabled:n.value,tooltip:"Guardar nuevo usuario"},{default:p(()=>[n.value?(m(),w(A,{key:0})):(m(),g("span",P,"save")),e[20]||(e[20]=_(" Guardar Usuario ",-1))]),_:1,__:[20]},8,["disabled"])])])])]),_:1})]))}},h=L(T,[["__scopeId","data-v-28a36a05"]]);export{h as default};
