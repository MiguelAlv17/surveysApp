import{u as $}from"./getDataUsuarios-ec8514d1.js";import{i as S,a as D,r as v,s as _,o as R,c,d as I,f as n,w as p,e as a,m as V,l as j}from"./index-cdc5c833.js";import{a as b,C as F,c as L,b as N}from"./alerts-7dbfee83.js";import{M as y}from"./ModernButton-8b041619.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{M as u}from"./ModernInput-32844397.js";import{M as E}from"./ModernSelect-fa688c41.js";import{L as O}from"./LoaderBtn-cd6be9a3.js";/* empty css                                                                     */const A={class:"form-container"},P={class:"form-row"},T={class:"form-row"},H={class:"footer-content"},K={class:"footer-actions"},W={class:"action-buttons"},z={key:1,class:"material-icons"},J={__name:"Edit",setup(Q){const{updateUser:B,getUserId:x}=$(),U=S(),q=D(),m=v(),r=_({usuario:"",contrasena:"",nombre:"",primer_apellido:"",segundo_apellido:"",correo:"",tipo_usuario:"",estado:""}),t=v(!1),l=_({usuario:"",contrasena:"",nombre:"",primer_apellido:"",segundo_apellido:"",correo:"",tipo_usuario:"",estado:""});R(()=>{w()});const w=async()=>{const s=q.params.iduser;m.value=!0;const e=await x(s);m.value=!1;const{data:o,status:M}=e;if(M!=200){b("Error","Ocurrio un error al cargar la informacion del usuario",2);return}Object.assign(r,o[0])},i=(s,e)=>{switch(s){case"nombre":return e.trim()?e.length<2?(l.nombre="El nombre debe tener al menos 2 caracteres",!1):(l.nombre="",!0):(l.nombre="El nombre es requerido",!1);case"primer_apellido":return e.trim()?e.length<2?(l.primer_apellido="El primer apellido debe tener al menos 2 caracteres",!1):(l.primer_apellido="",!0):(l.primer_apellido="El primer apellido es requerido",!1);case"segundo_apellido":return e.trim()?e.length<2?(l.segundo_apellido="El segundo apellido debe tener al menos 2 caracteres",!1):(l.segundo_apellido="",!0):(l.segundo_apellido="El segundo apellido es requerido",!1);case"correo":const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.trim()?o.test(e)?(l.correo="",!0):(l.correo="Ingrese un correo válido",!1):(l.correo="El correo es requerido",!1);case"tipo_usuario":return e?(l.tipo_usuario="",!0):(l.tipo_usuario="Debe seleccionar un tipo de usuario",!1);default:return!0}},C=()=>[i("nombre",r.nombre),i("primer_apellido",r.primer_apellido),i("segundo_apellido",r.segundo_apellido),i("correo",r.correo),i("tipo_usuario",r.tipo_usuario)].every(Boolean),k=async()=>{if(!C()){L("Por favor, corrija los errores en el formulario");return}t.value=!0;try{r.usuario=r.correo;const s=await B(r),{data:e,status:o}=s;o===200||o===201?(await N("Registro exitoso","Redirigiendo a pantalla <strong>Usuarios</strong>",3),f(),g()):b("Error durante el registro")}catch(s){console.error("Error:",s),b("Error durante el registro")}finally{t.value=!1}},f=()=>{Object.keys(r).forEach(s=>{r[s]=""})},g=()=>{f(),U.push("/users")},d=(s,e)=>{r[s]=e,l[s]&&i(s,e)};return(s,e)=>(c(),I("div",null,[n(F,{loading:m.value,title:"Editar Usuario",subtitle:"Formulario para editar informacion del usuario",icon:"assignment_ind"},{body:p(()=>[a("div",A,[a("div",P,[n(u,{modelValue:r.usuarioId,"onUpdate:modelValue":e[0]||(e[0]=o=>r.usuarioId=o),type:"text",label:"ID",icon:"numbers",onBlur:e[1]||(e[1]=o=>i("usuarioId",r.usuarioId)),onInput:e[2]||(e[2]=o=>d("usuarioId",o.target.value)),placeholder:"Ingrese su usuarioId",required:!0,error:l.usuarioId,disabled:!0},null,8,["modelValue","error"]),n(u,{modelValue:r.nombre,"onUpdate:modelValue":e[3]||(e[3]=o=>r.nombre=o),type:"text",label:"Nombre Completo",icon:"person",onBlur:e[4]||(e[4]=o=>i("nombre",r.nombre)),onInput:e[5]||(e[5]=o=>d("nombre",o.target.value)),placeholder:"Ingrese su nombre",required:!0,error:l.nombre,disabled:t.value},null,8,["modelValue","error","disabled"])]),a("div",T,[n(u,{modelValue:r.primer_apellido,"onUpdate:modelValue":e[6]||(e[6]=o=>r.primer_apellido=o),type:"text",label:"Primer apellido",icon:"person",onBlur:e[7]||(e[7]=o=>i("primer_apellido",r.primer_apellido)),onInput:e[8]||(e[8]=o=>d("primer_apellido",o.target.value)),placeholder:"Ingrese su primer_apellido",required:!0,error:l.primer_apellido,disabled:t.value},null,8,["modelValue","error","disabled"]),n(u,{modelValue:r.segundo_apellido,"onUpdate:modelValue":e[9]||(e[9]=o=>r.segundo_apellido=o),type:"text",label:"Segundo apellido",icon:"person",onBlur:e[10]||(e[10]=o=>i("segundo_apellido",r.segundo_apellido)),onInput:e[11]||(e[11]=o=>d("segundo_apellido",o.target.value)),placeholder:"Ingrese su segundo_apellido",required:!0,error:l.segundo_apellido,disabled:t.value},null,8,["modelValue","error","disabled"])]),n(u,{modelValue:r.correo,"onUpdate:modelValue":e[12]||(e[12]=o=>r.correo=o),type:"email",label:"Correo Electrónico",onInput:e[13]||(e[13]=o=>d("correo",o.target.value)),onBlur:e[14]||(e[14]=o=>i("correo",r.correo)),icon:"email",placeholder:"ejemplo@correo.com",required:!0,error:l.correo,disabled:t.value},null,8,["modelValue","error","disabled"]),n(E,{modelValue:r.tipo_usuario,"onUpdate:modelValue":e[15]||(e[15]=o=>r.tipo_usuario=o),label:"tipo de usuario de usuario",icon:"badge",options:[{nombre:"Administrador",codigo:"1"},{nombre:"Monitoreo",codigo:"2"}],"option-label":"nombre","option-value":"codigo",placeholder:"Seleccione un tipo de usuario",onInput:e[16]||(e[16]=o=>d("tipo_usuario",o.target.value)),onBlur:e[17]||(e[17]=o=>i("tipo_usuario",r.tipo_usuario)),error:l.tipo_usuario,disabled:t.value},null,8,["modelValue","error","disabled"]),n(E,{modelValue:r.estado,"onUpdate:modelValue":e[18]||(e[18]=o=>r.estado=o),label:"Acceso a la aplicacion",icon:"lock_open",options:[{nombre:"Habilitado",codigo:"1"},{nombre:"Deshabilitado",codigo:"0"}],"option-label":"nombre","option-value":"codigo",placeholder:"Seleccione el nivel de acceso ",onInput:e[19]||(e[19]=o=>d("estado",o.target.value)),onBlur:e[20]||(e[20]=o=>i("estado",r.estado)),error:l.estado,disabled:t.value},null,8,["modelValue","error","disabled"]),e[21]||(e[21]=a("div",{class:"form-info mt-3"},[a("div",{class:"info-item"},[a("span",{class:"material-icons"},"info"),a("span",null,"Los campos marcados con * son obligatorios")]),a("div",{class:"info-item"},[a("span",{class:"material-icons"},"security"),a("span",null,"La contraseña debe tener al menos 6 caracteres")])],-1))])]),footer:p(()=>[a("div",H,[e[24]||(e[24]=a("div",{class:"footer-info"},[a("span",{class:"material-icons"},"info"),a("span",null,"Complete todos los campos requeridos")],-1)),a("div",K,[a("div",W,[n(y,{color:"lile",function:g,tooltip:"Cancelar y volver",disabled:t.value},{default:p(()=>e[22]||(e[22]=[a("span",{class:"material-icons"},"arrow_back",-1),V(" Cancelar ",-1)])),_:1,__:[22]},8,["disabled"]),n(y,{color:"purple",function:k,disabled:t.value,tooltip:"Guardar cambios del formulario"},{default:p(()=>[t.value?(c(),j(O,{key:0})):(c(),I("span",z,"save")),e[23]||(e[23]=V(" Guardar cambios ",-1))]),_:1,__:[23]},8,["disabled"])])])])]),_:1},8,["loading"])]))}},se=G(J,[["__scopeId","data-v-4bb99d83"]]);export{se as default};
